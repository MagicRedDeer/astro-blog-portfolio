---
import { getCollection } from 'astro:content';
import SectionHeading from '../atoms/SectionHeading';
import TestimonialCard from '../molecules/TestimonialCard';

const testimonials = await getCollection('testimonials');
const sortedTestimonials = testimonials.sort((a, b) => 
  b.data.date.getTime() - a.data.date.getTime()
);
---

<section class="py-20 bg-gray-50">
  <div class="container">
    <SectionHeading className="text-center">What People Say</SectionHeading>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {sortedTestimonials.map(testimonial => (
        <TestimonialCard {...testimonial.data} />
      ))}
    </div>
  </div>
</section>